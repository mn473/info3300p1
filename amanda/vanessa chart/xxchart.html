<html>
<head>
    <title>XXX Chart (Amanda/Vanessa) -- DECIDE WHICH ONE</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>

    <style></style>
</head>
<body>
    <h3> Descriptive Chart Title</h3>
    <svg id="XXX" width="600" height="500"></svg>

    <script>
    d3.csv("/noon_perfumes_dataset.csv").then(function(data) {
        let noteFrequency = {};
        
        data.forEach(d => {
            let middleNotes = d['middle_note'].split(/,|and/).map(note => note.trim());
            let scentType = d['scent_type']; 

            middleNotes.forEach(note => {
                if (!noteFrequency[note]) {
                    noteFrequency[note] = {};
                }
                
                if (!noteFrequency[note][scentType]) {
                    noteFrequency[note][scentType] = 0;
                }

                noteFrequency[note][scentType]++;
            });
            console.log(noteFrequency);
        });

        let noteData = [];
        for (let note in noteFrequency) {
        for (let scent in noteFrequency[note]) {
            noteData.push({
                note: note,
                scent: scent,
                count: noteFrequency[note][scent]
            });
        }
        noteData.forEach(entry => {
        console.log(`Scent: ${entry.scent}, Note: ${entry.note}, Count: ${entry.count}, Percentage: ${entry.percentage}%`);
    });
    }
    });
</script>

</body>
</html>