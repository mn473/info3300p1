<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <title>Perfume Sampling</title>
</head>
<body>
    <script>
        d3.json("filtered_top_8_scents.json").then(function(data) {
            const groupedPerfumes = data.reduce((acc, item) => {
                if (item['scents_group'] && item['middle_note']) { // Ensure both scents_group and middle_note are present
                    if (!acc[item['scents_group']]) { acc[item['scents_group']] = []; }
                    acc[item['scents_group']].push(item);
                }
                return acc;
            }, {});

            const sampledPerfumes = {};
            for (const group in groupedPerfumes) {
                if (groupedPerfumes.hasOwnProperty(group)) {
                    const perfumes = groupedPerfumes[group];
                    // shuffle
                    const shuffled = perfumes.sort(() => 0.5 - Math.random());
                    sampledPerfumes[group] = shuffled.slice(0, 14); // Take the first 14 perfumes, aromatic only has 14
                }
            }
            console.log('Sampled Perfumes:', sampledPerfumes);
            return sampledPerfumes;
        });
    </script>
</body>
</html>
